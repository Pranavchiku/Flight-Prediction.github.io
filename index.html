<!DOCTYPE HTML>
<!--
	Aerial by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>Flight Price Prediction</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />

		<link rel="stylesheet" href="assets/css/main.css" />
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>

<style>

</style>
	</head>
	<body class="is-preload">
		<div id="wrapper">
			<div id="bg"></div>
			<div id="overlay"></div>
			<div id="main">

				<!-- Header -->
					<header id="header">
						<h1>Lets Fly!!</h1>
						<!-- <p>Security Chief &nbsp;&bull;&nbsp; Cyborg &nbsp;&bull;&nbsp; Never asked for this</p>  -->

						<nav>
							<ul>
								
								<!-- <li><a href="#" class="icon brands fa-twitter"><span class="label">Twitter</span></a></li>
								<li><a href="#" class="icon brands fa-facebook-f"><span class="label">Facebook</span></a></li>
								<li><a href="#" class="icon brands fa-dribbble"><span class="label">Dribbble</span></a></li>
								<li><a href="#" class="icon brands fa-github"><span class="label">Github</span></a></li>
								<li><a href="#" class="icon solid fa-envelope"><span class="label">Email</span></a></li> -->
								
							</ul>
						</nav>
						<ul>
						<label for="from">From:</label>
								<select name="from" id="from">
									<option value="value">--Select--</option>
									<option value=0>Banglore</option>
									<option value=1>Chennai</option>
									<option value=2>Delhi</option>
									<option value=3>Kolkata</option>
									<option value=4>Mumbai</option>

						</select>
						<label for="to">To:</label>
								<select name="to" id="to">
									<option value="value">--Select--</option>
									<option value=0>Banglore</option>
									<option value=1>Chennai</option>
									<option value=2>Delhi</option>
									<option value=3>Kolkata</option>
									<option value=4>Mumbai</option>
						</select>
						<label for="date">date:</label>
								<input class="dateSelect" type ="date" id="dateHere" name="dateHere"/>
						</select>
						
						</ul>
						<br>
						<ul>
							<label for="depTime">Dept. Time:</label>
								<input type="time" class="timeSelect" id="deptTimeHere" name="deptTimeHere"/>

							<label for="arrTime">Arrival Time:</label>
							<input type="time" class="timeSelect" id="arrivalTimeHere" name="arrivalTimeHere"/>
							<label for="duration">duration:</label>
							<input type="text" class="durationSelect" placeholder="xxH yyM"id="duration" name="duration"/>
							
							<!-- <select name="smoking" id="smoking">
								<option value="value">--Select--</option>
								<option value=0>Formerly Smoked</option>
								<option value=1>Never Smoked</option>
								<option value=2>Smokes</option>
								<option value=3>Don't Know About It</option>
							</select> -->
						</ul>
						<br>
						<ul>
							<label for="totalStops">TotalStops:</label>

							<select name="totalStops" id="totalStops">
								<option value="value">--Select--</option>
								<option value=0>0</option>
								<option value=1>1</option>
								<option value=2>2</option>
								<option value=3>3</option>
								<option value=4>4</option>
							</select>
							<label for="airlint">Airline:</label>

							<select name="airline" id="airline">
								<option value="value">--Select--</option>
								<option value=0>Air Asia</option>
								<option value=1>Air India</option>
								<option value=2>GoAir</option>
								<option value=3>Indigo</option>
								<option value=4>Jet Airways</option>
								<option value=5>Jet Airways Business</option>
								<option value=6>Multiple carriers</option>
								<option value=7>Multiple carriers Premium economy</option>
								<option value=8>SpiceJet</option>
								<option value=9>Trujet</option>
								<option value=10>Vistara</option>
								<option value=11>Vistara Premium economy</option>

							</select>
						</ul>
						<br>
						<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@1.5.2/dist/tf.min.js"></script>

						<script>
							tf.loadLayersModel("dnn/model.json").then(function(model) {
								window.model = model;
								console.log("my model loaded");
								});
							function predict(){
								var input=[];
								var airline=document.getElementById("airline").value;
								var dateOfJourney=((Date.parse(document.getElementById("dateHere").value)/1000)-1551398400.0)/((Date.parse(document.getElementById("dateHere").value)/1000)-1551398400.0);
								var source=document.getElementById("from").value;
								var destination=document.getElementById("to").value;
								var depTime=document.getElementById("deptTimeHere").value;
								var a = depTime.split(':');
								depTime=(+a[0])*3600 + (+a[1])*60;
								depTime=(depTime-0)/(86340-0);
								var arrivalTime=document.getElementById("arrivalTimeHere").value;
								var a = arrivalTime.split(':');
								arrivalTime=(+a[0])*3600 + (+a[1])*60;
								arrivalTime=(arrivalTime-0)/(86340-0);
								var duration=document.getElementById('duration').value;
								var a = duration.split(' ');
								if(a.length==2){
									var temp='';
									for(var i=0;i<a[0].length-1;i=i+1){
										temp=temp+a[0][i]
									}
									duration=(+temp)*3600;
									temp='';
									for(var i=0;i<a[1].length-1;i=i+1){
										temp=temp+a[1][i]
									}
									duration+=(+temp)*60;
								}
								else{
									var temp='';
									for(var i=0;i<a[0].length-1;i=i+1){
										temp=temp+a[0][i]
									}
									duration=(+temp)*3600;
								}
								if(duration>=171600){
									duration=1;
								}
								else if (duration<=4500){
									duration=0;
								}
								else{
									duration = (duration-171600)/(171600-4500);
								}
								console.log(arrivalTime);
								console.log(duration);
								var totalStops=document.getElementById('totalStops').value;
								var additionalInfo=7;
								input=[parseInt(airline),parseInt(dateOfJourney),parseInt(source),parseInt(destination),parseInt(depTime),parseInt(arrivalTime),parseInt(duration),parseInt(totalStops),parseInt(additionalInfo)];
								window.model.predict([tf.tensor(input).reshape([1,9])]).array().then(function(scores){
									scores = scores[0];
									//predicted = scores.indexOf(Math.max(...scores));
									// $('#number').html(predicted);
									//console.log(predicted);
									console.log(scores[0]);
									document.getElementById('predictedPrize').style.display="block";
									document.getElementById('predictedPrize').innerHTML="Predicted Price is : " + scores[0].toString(); 

								});

							}

						</script>

						<button type="submit" onclick="predict()"class="btn">Predict</button>
    					<!-- <div class="box" id="boxPredictedPrize"> -->
						<h2 class="center" id="predictedPrize" style="display:none;">
							Predicted Price is 
						</h2>
						<!-- </div> -->

					</header>

				<!-- Footer -->
					<footer id="footer">
						<span class="copyright">&copy; Designed By <a href="https://pranavchiku.github.io/">Pranav Goswami</a>.</span>
					</footer>

			</div>
		</div>
		<script>
			window.onload = function() { document.body.classList.remove('is-preload'); }
			window.ontouchmove = function() { return false; }
			window.onorientationchange = function() { document.body.scrollTop = 0; }
		</script>
	</body>
</html>